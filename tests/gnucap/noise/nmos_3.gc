* MOSFET noise test

load ./resistor.so

* Enable Verilog mode
verilog

ground gnd;
option temp=125.0;
option numdgt=9;

NMOS #(.l(L), .w(WN)) M1(.d(out), .g(g), .s(gnd), .b(gnd));
resistor #(.r(10k), .noisy(1.0)) RD(vdd, out);

vsource #(.dc(VNOM)) Vdd(vdd, gnd);
vsource #(.dc(0.5*VNOM)) Vg(g, gnd);

// Total noise power at the drain node
noise_probe n_out(out);

list
print ac npwr(n_out)
dc
ac dec 50 1 1e6 basic
end